# Databricks Asset Bundle Configuration
# Deploy: databricks bundle deploy --target dev

bundle:
  name: genie_enhancer

sync:
  exclude:
    # Virtual environments
    - ".venv"
    - "venv"
    - "ENV"
    - "env"

    # Node modules and frontend build
    - "frontend/node_modules"
    - "frontend/.next"

    # Local storage and runtime data
    - "storage"
    - "output"

    # Git and development
    - ".git"
    - ".databricks"
    - "worktrees"

    # Python bytecode
    - "__pycache__"
    - "*.pyc"
    - "*.pyo"
    - "*.pyd"

    # Environment and secrets
    - ".env"
    - ".env.local"

    # Cache and temporary files
    - "*.log"
    - "*.pid"
    - ".parse_cache.json"

    # IDE and OS
    - ".vscode"
    - ".idea"
    - ".DS_Store"

    # Reference code (not needed for deployment)
    - "reference"

    # Documentation and non-runtime files
    - "docs"
    - "claudedocs"
    - "benchmarks"
    - "config"
    - "schema"
    - "workflows"

# App resource definition - enables secret interpolation
resources:
  apps:
    genie_enhancer_app:
      name: 'genie-enhancer'
      description: 'Genie Space Enhancement Tool - Improves Genie Space accuracy using AI-generated fixes'
      source_code_path: ${workspace.file_path}/files/

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://krafton-sandbox.cloud.databricks.com/
